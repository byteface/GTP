<!DOCTYPE HTML>
<html lang="en">

	<head>
		<title>proccess GPU</title>		
		<meta charset="utf-8">
	</head>

	<body>


    <canvas width="256" height="256" id="positive"></canvas>
    <canvas width="256" height="256" id="mainCanvas"></canvas>
    <canvas width="256" height="256" id="outputCanvas"></canvas>    



    <script type="text/javascript" src="js/includer.js"></script>


    <script id="shader-fs" type="x-shader/x-fragment">
    
        precision mediump float;
    
        varying vec2 vTextureCoord;
    
        uniform sampler2D uSampler;
    
        void main(void) {
        
            vec4 col = texture2D( uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
    
    
    //col += texture2D(uSampler, vTextureCoord );
    
    
            // finds all the word 'the' in the document
        //    if( (col[0] != (20./255.)) && (col[1] != (8./255.)) && (col[2] != (5./255.)) ){
          //      col += vec4( 1, 1, 1, 1.0 );
            //}
            
            
            /*
            vec4 col = texture2D( uSampler, vec2(vTextureCoord.s+1.0, vTextureCoord.t));
    
            // finds all the word 'the' in the document
            if( (col[0] != (20./255.)) && (col[1] != (8./255.)) && (col[2] != (5./255.)) ){
                col += vec4( 1, 1, 1, 1.0 );
            }            
            
            */
            

            gl_FragColor = col;
            
        }
    </script>
    
    <script id="shader-vs" type="x-shader/x-vertex">
    
        attribute vec3 aVertexPosition;
        attribute vec2 aTextureCoord;
    
    //    uniform mat4 uMVMatrix;
      //  uniform mat4 uPMatrix;
    
        varying vec2 vTextureCoord;
    
    
        void main(void) {
            gl_Position = /*uPMatrix * uMVMatrix * */vec4(aVertexPosition, 1.0);


//            vTextureCoord = aTextureCoord * vec2(-1.0,1.0); // MINUS ONE CAN REVERSE OUR DATA *I>E REVERSE ARRAYS ... blimey. thats very cool
            
            vTextureCoord = aTextureCoord * vec2(-1.0,1.0); // MINUS ONE CAN REVERSE OUR DATA *I>E REVERSE ARRAYS ... blimey. thats very cool            
            
            
        }
        
    </script>

    <script>    


        // load in some image data
        var pos = new GTP.Loader();
        pos.loadAsImage( "data/random.png", "positive", function() { 
            main();
        });

        function main()
        {
            var gl;
            var canvas = document.getElementById('mainCanvas');
            try {
                gl = canvas.getContext('experimental-webgl');
            } catch (e) {
                throw new Error('no WebGL found');
            }
            
            if (gl)
            {
                gl.clearColor(0.0, 0.0, 1.0, 1.0);                      // Set clear color to blue, fully opaque  
                gl.enable(gl.DEPTH_TEST);                               // Enable depth testing  
                gl.depthFunc(gl.LEQUAL);                                // Near things obscure far things  
                gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);      // Clear the color as well as the depth buffer.
                
                gl.viewportWidth = 256;
                gl.viewportHeight = 256;
            } 
            
            var glTest = WEBGL;
            glTest.gl = gl;
            glTest.run( 'positive' );

        }


		</script>
				
	</body>
</html>